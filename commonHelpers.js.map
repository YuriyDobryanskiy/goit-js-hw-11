{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '41936160-9a65f6e7e8f481bcadff71523';\nconst BASE_URL = 'https://pixabay.com/api';\n\nconst testGallery = query => {\n  const requestUrl = `${BASE_URL}/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n  //console.log(requestUrl);\n  return fetch(requestUrl).then(response => {\n    if (!response.ok) {\n      throw new Error(`Error-message ${response.status}`);\n    }\n    return response.json();\n  });\n};\n\n//popup with image\nconst lightbox = () => {\n  new SimpleLightbox('.gallery a', {\n    showCounter: false,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n};\n//popup with image\n\n//Form\nconst form = document.querySelector('#imageSearchForm');\nconst searchInput = document.querySelector('#searchInput');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('#gallery');\n\nform.addEventListener('submit', function (e) {\n  e.preventDefault();\n  const searchTerm = searchInput.value.trim();\n\n  if (searchTerm === '') {\n    showError('Please enter a search term.');\n    return;\n  }\n\n  loader.style.display = 'block';\n  gallery.innerHTML = '';\n\n  testGallery(searchTerm)\n    .then(data => {\n      if (data.hits.length > 0) {\n        let markup = '';\n        data.hits.forEach(element => {\n          markup += createMarkup(element);\n        });\n        gallery.innerHTML = markup;\n        lightbox();\n      } else {\n        showError(\n          'Sorry, there are no images matching your search query. Please, try again!'\n        );\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      showError('An error occurred while fetching images. Please try again.');\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n      searchInput.value = '';\n    });\n});\n//Form\n\n//markup\nfunction createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\"></a><div class='gallery-history'><div class='block1'><span>Likes</span>${likes}</div><div class='block2'><span>Views</span>${views}</div><div class='block3'><span>Comments</span>${comments}</div><div class='block4'><span>Downloads</span>${downloads}</div></li>`;\n}\n//markup\n\n//function\nfunction showError(message) {\n  iziToast.error({\n    theme: 'dark',\n    message: message,\n    timeout: 50000,\n    backgroundColor: '#EF4040',\n    //iconUrl: './img/octagon.svg',\n    messageColor: '#FAFAFB',\n  });\n}\n//function\n"],"names":["API_KEY","BASE_URL","testGallery","query","requestUrl","response","lightbox","SimpleLightbox","form","searchInput","loader","gallery","e","searchTerm","showError","data","markup","element","createMarkup","error","webformatURL","largeImageURL","tags","likes","views","comments","downloads","message","iziToast"],"mappings":"6vBAKA,MAAMA,EAAU,qCACVC,EAAW,0BAEXC,EAAcC,GAAS,CAC3B,MAAMC,EAAa,GAAGH,CAAQ,SAASD,CAAO,MAAMG,CAAK,2DAEzD,OAAO,MAAMC,CAAU,EAAE,KAAKC,GAAY,CACxC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,iBAAiBA,EAAS,MAAM,EAAE,EAEpD,OAAOA,EAAS,MACpB,CAAG,CACH,EAGMC,EAAW,IAAM,CACrB,IAAIC,EAAe,aAAc,CAC/B,YAAa,GACb,aAAc,MACd,aAAc,GAClB,CAAG,CACH,EAIMC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAEjDH,EAAK,iBAAiB,SAAU,SAAUI,EAAG,CAC3CA,EAAE,eAAc,EAChB,MAAMC,EAAaJ,EAAY,MAAM,KAAI,EAEzC,GAAII,IAAe,GAAI,CACrBC,EAAU,6BAA6B,EACvC,MACD,CAEDJ,EAAO,MAAM,QAAU,QACvBC,EAAQ,UAAY,GAEpBT,EAAYW,CAAU,EACnB,KAAKE,GAAQ,CACZ,GAAIA,EAAK,KAAK,OAAS,EAAG,CACxB,IAAIC,EAAS,GACbD,EAAK,KAAK,QAAQE,GAAW,CAC3BD,GAAUE,EAAaD,CAAO,CACxC,CAAS,EACDN,EAAQ,UAAYK,EACpBV,GACR,MACQQ,EACE,2EACV,CAEA,CAAK,EACA,MAAMK,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CL,EAAU,4DAA4D,CAC5E,CAAK,EACA,QAAQ,IAAM,CACbJ,EAAO,MAAM,QAAU,OACvBD,EAAY,MAAQ,EAC1B,CAAK,CACL,CAAC,EAID,SAASS,EAAa,CACpB,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO,0DAA0DL,CAAa,qCAAqCD,CAAY,kBAAkBC,CAAa,UAAUC,CAAI,4EAA4EC,CAAK,+CAA+CC,CAAK,kDAAkDC,CAAQ,mDAAmDC,CAAS,aACza,CAIA,SAASZ,EAAUa,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,OACP,QAASD,EACT,QAAS,IACT,gBAAiB,UAEjB,aAAc,SAClB,CAAG,CACH"}